name: Store Poll Response

on:
  workflow_dispatch:
  repository_dispatch:
    types: [create_poll_response]

jobs:
  create_issue:
    runs-on: ubuntu-latest
    steps:
      - name: Create GitHub issue with response
        uses: actions/github-script@v6
        with:
          script: |
            const { response } = context.payload.client_payload;
            const issueTitle = `Poll Response: ${response}`;
            const issueBody = `Response: ${response} submitted at ${new Date().toLocaleString()}`;
            await github.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: issueTitle,
              body: issueBody,
            });

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neko Code Documentation</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter (for body text) and Montserrat (for headings) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Default Dark Mode Colors */
            --bg-primary: #1D1D1D;
            --bg-secondary: #1E293B;
            --text-primary: #E2E8F0;
            --text-secondary: #94A3B8;
            --border-color: #334155;
            --code-bg: #000000;

            /* Default Theme Color (Purple) */
            --theme-primary: #8B5CF6; /* Purple */
            --theme-hover: #7C3AED;
            --theme-border: #7F00FF;
            --theme-active-sidebar: #7F00FF;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .section-title {
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .page-heading {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            color: var(--text-primary);
        }

        .card {
            background-color: var(--bg-secondary);
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        .code-block {
            background-color: var(--code-bg);
            color: var(--text-secondary);
            padding: 1rem;
            border-radius: 0.375rem;
            font-family: monospace;
            overflow-x: auto;
        }
        .btn-primary {
            background-color: var(--theme-primary);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.3s ease, transform 0.1s ease;
        }
        .btn-primary:hover {
            background-color: var(--theme-hover);
            transform: translateY(-1px);
        }
        .btn-primary:active {
            transform: translateY(0);
        }
        .sidebar {
            background-color: transparent;
            padding: 1.5rem;
            border-radius: 0;
            box-shadow: none;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            padding-top: 2rem;
            padding-bottom: 2rem;
            border-right: 1px solid var(--border-color);
            /* Mobile specific styles */
            position: fixed; /* Make it fixed for mobile overlay */
            top: 0;
            left: 0;
            width: 80%; /* Occupy 80% width on mobile */
            max-width: 300px; /* Max width for mobile sidebar */
            z-index: 50; /* Ensure it's above content but below modals */
            background-color: var(--bg-primary); /* Solid background for mobile overlay */
            transform: translateX(-100%); /* Start off-screen */
            transition: transform 0.3s ease-in-out;
        }
        .sidebar.open {
            transform: translateX(0); /* Slide in */
        }
        @media (min-width: 1024px) { /* Desktop styles */
            .sidebar {
                position: sticky; /* Revert to sticky on desktop */
                width: 1/5; /* Keep desktop width */
                transform: translateX(0); /* Always visible */
                border-right: 1px solid var(--border-color);
            }
        }

        .sidebar-link {
            display: block;
            padding: 0.5rem 0.75rem;
            color: var(--text-secondary);
            transition: color 0.2s ease, background-color 0.2s ease, border-left 0.2s ease;
            border-radius: 0.25rem;
            margin-bottom: 0.125rem;
        }
        .sidebar-link:hover {
            color: var(--text-primary);
            background-color: var(--border-color);
        }
        .sidebar-link.active {
            color: var(--theme-active-sidebar);
            background-color: transparent;
            font-weight: 600;
            border-left: 3px solid var(--theme-active-sidebar);
            padding-left: calc(0.75rem - 3px);
        }
        .sidebar-link.sidebar-parent-active {
            background-color: var(--border-color);
            color: var(--text-primary);
            border-left: 3px solid var(--theme-active-sidebar);
            padding-left: calc(0.75rem - 3px);
        }
        .sidebar ul ul {
            margin-left: 1.5rem;
        }
        .main-content-area {
            padding: 1.5rem;
            background-color: var(--bg-primary);
        }
        @media (min-width: 1024px) {
            .main-content-area {
                padding: 2.5rem;
            }
        }
        #scrollToTopBtn {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 30px;
            z-index: 99;
            border: 1px solid var(--theme-border);
            outline: none;
            background-color: rgba(127, 0, 255, 0.2);
            color: var(--theme-border);
            cursor: pointer;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            transition: background-color 0.3s ease, transform 0.1s ease, color 0.3s ease;
        }
        #scrollToTopBtn:hover {
            background-color: var(--theme-border);
            color: white;
            transform: translateY(-2px);
        }
        #scrollToTopBtn:active {
            transform: translateY(0);
        }

        .search-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            z-index: 100;
            padding-top: 10vh;
        }

        .search-container-modal {
            background-color: var(--bg-secondary);
            border-radius: 0.5rem;
            box-shadow: 0 8px 16px 0px rgba(0,0,0,0.4);
            width: 90%;
            max-width: 600px;
            padding: 1.5rem;
            position: relative;
        }

        .search-input-modal {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            background-color: var(--code-bg);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            outline: none;
            font-size: 1.125rem;
            margin-bottom: 1rem;
        }

        .search-results-list {
            max-height: 400px;
            overflow-y: auto;
            border-top: 1px solid var(--border-color);
            padding-top: 0.5rem;
        }

        .search-result-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            border-radius: 0.25rem;
            transition: background-color 0.2s ease;
            margin-bottom: 0.25rem;
        }

        .search-result-item:hover {
            background-color: var(--border-color);
        }

        .search-result-item .title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .search-result-item .snippet {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        .settings-container {
            position: relative;
            display: inline-block;
        }

        .settings-button {
            background-color: transparent;
            border: none;
            color: var(--text-primary);
            font-weight: 600;
            padding: 0.5rem 1rem;
            cursor: pointer;
            border-radius: 0.375rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: background-color 0.2s ease;
        }

        .settings-button:hover {
            background-color: var(--border-color);
        }

        .settings-dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--bg-secondary);
            min-width: 180px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 0.5rem;
            padding: 1rem;
            right: 0;
            top: 100%;
            margin-top: 0.5rem;
        }

        .settings-dropdown-content.show {
            display: block;
        }

        .color-swatch {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s ease, transform 0.1s ease;
        }

        .color-swatch:hover {
            transform: scale(1.1);
        }

        .color-swatch.active {
            border-color: var(--text-primary);
        }

        .color-swatch-purple { background-color: #8B5CF6; }
        .color-swatch-green { background-color: #10B981; }
        .color-swatch-blue { background-color: #3B82F6; }
        .color-swatch-pink { background-color: #EC4899; }

        /* Overlay for when mobile sidebar is open */
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 40; /* Below sidebar, above content */
            display: none; /* Hidden by default */
        }
        .sidebar-overlay.show {
            display: block;
        }
    </style>
</head>
<body class="antialiased leading-normal">
    <div class="flex flex-col lg:flex-row min-h-screen">
        <!-- Sidebar Overlay for Mobile -->
        <div id="sidebar-overlay" class="sidebar-overlay"></div>

        <!-- Left Sidebar Navigation -->
        <!-- The 'hidden' class is removed by JS on desktop, and added/removed on mobile -->
        <aside id="sidebar" class="w-full lg:w-1/5 sidebar hidden lg:block">
            <div class="mb-8 text-center lg:text-left flex items-center justify-between">
                <div>
                    <h2 class="text-3xl font-bold text-white page-heading">Neko Code</h2>
                    <p class="text-gray-400 text-sm">Documentation</p>
                </div>
                <!-- Close button for mobile sidebar (visible only on mobile) -->
                <button id="close-sidebar-btn" class="lg:hidden text-gray-400 hover:text-white focus:outline-none p-2 rounded-full hover:bg-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>

            <div class="mb-6 relative">
                <input type="text" id="search-input-main" placeholder="Search docs... (Ctrl + K)"
                       class="w-full p-2 rounded-md bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[var(--theme-border)]">
            </div>

            <nav id="sidebar-nav">
                <ul>
                    <li><a href="#" class="sidebar-link active" data-page-id="about">About</a></li>
                    <li><a href="#" class="sidebar-link" data-page-id="getting-started">Getting Started</a></li>
                    <li><a href="#" class="sidebar-link" data-page-id="features">Features</a></li>
                    <li><a href="#" class="sidebar-link" data-page-id="how-to-use">How to Use</a></li>
                    <li><a href="#" class="sidebar-link" data-page-id="commands-overview">Command List Overview</a></li>
                    <li class="ml-4"><a href="#" class="sidebar-link" data-page-id="commands-slash">Slash Commands</a>
                        <ul class="ml-4">
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-moderation">Moderation</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-utility">Utility</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-fun">Fun</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-gifs">GIFs</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-image">Image</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-server-management">Server Management</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-support">Support</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-text-tools">Text Tools</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-security">Security</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-tools">Tools</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-other">Other Commands</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-hire">Hire Neko</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-slash-uncategorized">Uncategorized</a></li>
                        </ul>
                    </li>
                    <li class="ml-4"><a href="#" class="sidebar-link" data-page-id="commands-prefix">Prefix Commands</a>
                        <ul class="ml-4">
                            <li><a href="#" class="sidebar-link" data-page-id="commands-prefix-economy">Economy</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-prefix-fun-games">Fun and Games</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-prefix-utility">Utility</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-prefix-lookup">Look-up</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-prefix-math-conversion">Math & Conversion</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="commands-prefix-meta">Meta</a></li>
                        </ul>
                    </li>
                    <li><a href="#" class="sidebar-link" data-page-id="other-features">Other Features</a>
                        <ul class="ml-4">
                            <li><a href="#" class="sidebar-link" data-page-id="other-features-detectors">Detectors</a></li>
                            <li><a href="#" class="sidebar-link" data-page-id="other-features-quotes-link">Quotes Message Link</a></li>
                        </ul>
                    </li>
                    <li><a href="#" class="sidebar-link" data-page-id="support">Support & Community</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="w-full lg:w-4/5 main-content-area flex flex-col">
            <!-- Header for settings button and hamburger icon -->
            <header class="flex justify-between items-center p-4">
                <!-- Hamburger Icon (visible on mobile, hidden on desktop) -->
                <button id="hamburger-btn" class="lg:hidden text-gray-400 hover:text-white focus:outline-none p-2 rounded-full hover:bg-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>

                <div class="settings-container">
                    <button id="settings-button" class="settings-button">
                        SETTINGS
                        <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div id="settings-dropdown" class="settings-dropdown-content">
                        <div class="flex items-center justify-between mb-4">
                            <span class="text-white text-sm font-semibold">Theme</span>
                            <div class="flex space-x-2">
                                <div class="color-swatch color-swatch-purple active" data-color="purple"></div>
                                <div class="color-swatch color-swatch-green" data-color="green"></div>
                                <div class="color-swatch color-swatch-blue" data-color="blue"></div>
                                <div class="color-swatch color-swatch-pink" data-color="pink"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dynamic Content Area -->
            <div id="content-display" class="flex-grow min-h-[60vh] p-6">
                <!-- Content will be loaded here dynamically by JavaScript -->
            </div>

            <!-- Footer -->
            <footer class="text-center text-gray-500 mt-10 pt-6 border-t border-gray-700">
            </footer>
        </main>
    </div>

    <!-- Search Overlay/Modal -->
    <div id="search-overlay" class="search-overlay hidden">
        <div class="search-container-modal">
            <input type="text" id="search-input-modal" placeholder="Search docs..." class="search-input-modal">
            <div id="search-results" class="search-results-list">
                <!-- Search results will be dynamically loaded here -->
            </div>
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <button id="scrollToTopBtn" title="Go to top">â†‘</button>

    <script>
        // Define all documentation content as HTML strings
        const documentationContent = {
            "about": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">About Neko Code</h2>
                <p class="text-gray-300 leading-relaxed">
                    Neko Code is designed to enhance your Discord server experience with a wide range of features.
                    From moderation tools to fun commands and utility functions, Neko Code aims to be an all-in-one
                    solution for server management and community engagement. Our goal is to provide a stable,
                    user-friendly, and constantly evolving bot that meets the needs of various Discord communities.
                </p>
                <p class="text-gray-300 leading-relaxed mt-4">
                    Neko Code stands out with its commitment to a seamless user experience, offering intuitive commands and reliable performance. We continuously strive to incorporate feedback from our vibrant community to introduce new functionalities and refine existing ones, ensuring that Neko Code remains a cutting-edge tool for Discord server administration and entertainment. Our development team is dedicated to maintaining high standards of security and efficiency, providing a safe and enjoyable environment for all users. We believe in fostering a strong community around Neko Code, where users can share ideas, get support, and contribute to the bot's growth.
                </p>
                <p class="text-gray-300 leading-relaxed mt-4">
                    We are committed to regular updates, adding new features based on user feedback, and ensuring
                    the bot runs smoothly 24/7. Join our support server if you have any questions or suggestions!
                </p>
            `,
            "getting-started": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Getting Started</h2>
                <p class="text-gray-300 leading-relaxed mb-4">
                    Welcome to Neko Code! This guide will help you get started with adding the bot to your server and understanding its basic functionalities.
                </p>
                <h3 class="text-2xl font-medium text-white mb-3">1. Inviting Neko Code</h3>
                <p class="text-gray-300 mb-4">
                    To invite Neko Code to your Discord server, simply click on the "Invite Neko Code" button. Make sure you have "Manage Server" permissions on the server you wish to add the bot to.
                </p>
                <div class="code-block mb-6">
                    <p><strong>Invite Link:</strong> <a href="https://nekocode.in/invite" target="_blank" class="text-blue-400 hover:underline">https://nekocode.in/invite</a></p>
                </div>
                <h3 class="text-2xl font-medium text-white mb-3">2. Granting Permissions</h3>
                <p class="text-gray-300 mb-4">
                    During the invitation process, you will be asked to grant certain permissions to the bot. For Neko Code to function correctly, it's recommended to grant it Administrator permissions or at least the necessary permissions for its features (e.g., Send Messages, Manage Messages, Kick Members, etc.).
                </p>
                <h3 class="text-2xl font-medium text-white mb-3">3. Setting Up Your Server</h3>
                <p class="text-gray-300 mb-4">
                    Once invited, Neko Code will be online in your server. You can then configure specific settings or roles for the bot as needed. Refer to the "How to Use" and "Command List" sections for more details on configuration and commands.
                </p>
                <h3 class="text-2xl font-medium text-white mb-3">4. Getting Help</h3>
                <p class="text-gray-300 mb-4">
                    If you encounter any issues or have questions, join our <a href="https://nekocode.in/discord" target="_blank" class="text-blue-400 hover:underline">support server</a>.
                </p>
            `,
            "features": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Key Features</h2>
                <ul class="list-disc list-inside text-gray-300 space-y-2">
                    <li><strong>Moderation:</strong> Keep your server clean and orderly with powerful moderation commands like kick, ban, mute, warn, and more.</li>
                    <li><strong>Utilities:</strong> Handy tools for everyday server tasks, including user info, server info, avatar lookup, and role management.</li>
                    <li><strong>Fun & Games:</strong> Engage your community with entertaining commands, mini-games, and interactive elements.</li>
                    <li><strong>Welcome and Goodbye:</strong> Automate welcome and goodbye messages for new and leaving members.</li>
                    <li><strong>Economy:</strong> Participate in a server-wide economy with various ways to earn and spend currency.</li>
                </ul>
                <p class="text-sm text-gray-400 mt-4">
                    <em>Note: Specific features may vary. Please refer to the command list for the most up-to-date information.</em>
                </p>
            `,
            "how-to-use": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">How to Use Neko Code</h2>
                <p class="text-gray-300 mb-4">
                    Using Neko Code is straightforward. Once invited to your server, you can start interacting with it
                    using commands.
                </p>

                <h3 class="text-2xl font-medium text-white mb-3">1. Inviting the Bot</h3>
                <p class="text-gray-300 mb-4">
                    To invite Neko Code to your server, click the "Invite Neko Code" button at the top of this page or refer to the <a class="text-blue-400 hover:underline">Getting Started</a> section.
                    Make sure you have "Manage Server" permissions on the server you wish to invite it to.
                </p>

                <h3 class="text-2xl font-medium text-white mb-3">2. Bot Prefixes</h3>
                <p class="text-gray-300 mb-4">
                    Neko Code's prefixes are <strong>not customizable</strong>. You can use any of the following prefixes before a command: <code class="code-block inline-block px-2 py-1 text-sm">!</code>, <code class="code-block inline-block px-2 py-1 text-sm">$</code>, <code class="code-block inline-block px-2 py-1 text-sm">?</code>, <code class="code-block inline-block px-2 py-1 text-sm">></code>.
                </p>
                <div class="code-block mb-6">
                    <p>Example: <code>!quote-this</code></p>
                    <p>Example: <code>$balance</code></p>
                </div>

                <h3 class="text-2xl font-medium text-white mb-3">3. Slash Commands</h3>
                <p class="text-gray-300 mb-4">
                    Neko Code also supports Discord's native slash commands. These commands start with <code class="code-block inline-block px-2 py-1 text-sm">/</code>.
                    Slash commands cannot be used as prefix commands. Simply type <code class="code-block inline-block px-2 py-1 text-sm">/</code>
                    in your Discord chat, and a list of available commands will appear.
                </p>
                <div class="code-block mb-6">
                    <p>Example: <code>/help</code></p>
                    <p>Example: <code>/ping</code></p>
                </div>

                <h3 class="text-2xl font-medium text-white mb-3">4. Getting Help</h3>
                <p class="text-gray-300 mb-4">
                    For a full list of commands and their usage, type <code class="code-block inline-block px-2 py-1 text-sm">/help</code> in your Discord server.
                </p>
            `,
            "commands-overview": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Command List Overview</h2>
                <p class="text-gray-300 mb-6">
                    Neko Code offers a wide array of commands accessible via both slash commands (Discord's native commands starting with <code>/</code>) and traditional prefix commands (starting with <code>!</code>, <code>$</code>, <code>?</code>, <code>></code>).
                    Below is an overview of the command categories. Click on the specific categories in the navigation to see detailed commands and their usage.
                </p>
                <h3 class="text-2xl font-medium text-white mb-3">Slash Commands</h3>
                <p class="text-gray-300 mb-4">
                    Slash commands are Discord's modern way of interacting with bots, offering auto-completion and integrated command options. They are generally preferred for a smoother user experience.
                    Explore the sub-sections for detailed lists of Moderation, Utility, Fun, GIFs, Image, Server Management, Support, Text Tools, Security, Tools, Other, Hire Neko, and Uncategorized slash commands.
                </p>
                <h3 class="text-2xl font-medium text-white mb-3">Prefix Commands</h3>
                <p class="text-gray-300 mb-4">
                    Prefix commands are the traditional way to interact with bots by typing one of the bot's prefixes (<code>!</code>, <code>$</code>, <code>?</code>, <code>></code>) followed by the command name.
                    Explore the sub-sections for detailed lists of Economy, Fun and Games, Utility, Look-up, Math & Conversion, and Meta prefix commands.
                </p>
            `,
            "commands-slash": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands</h2>
                <p class="text-gray-300 mb-4">
                    This section provides an overview of the main slash command categories. For detailed command usage and examples, please navigate to the specific sub-sections in the sidebar.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2">
                    <li><strong>Moderation:</strong> Commands to help you manage and moderate your server.</li>
                    <li><strong>Utility:</strong> General utility commands for server and user information, giveaways, and more.</li>
                    <li><strong>Fun:</strong> Engaging commands for entertainment and interaction.</li>
                    <li><strong>GIFs:</strong> Commands to send various anime-themed GIFs.</li>
                    <li><strong>Image:</strong> Commands related to images, including avatars and random animal pictures.</li>
                    <li><strong>Server Management:</strong> Tools for managing channels, roles, and user nicknames.</li>
                    <li><strong>Support:</strong> Commands to get help or report issues.</li>
                    <li><strong>Text Tools:</strong> Utilities for text manipulation like translation and anonymous confessions.</li>
                    <li><strong>Security:</strong> Commands for security-related checks.</li>
                    <li><strong>Tools:</strong> General purpose tools like password generation.</li>
                    <li><strong>Other Commands:</strong> Miscellaneous commands.</li>
                    <li><strong>Hire Neko:</strong> Information on hiring the developer.</li>
                    <li><strong>Uncategorized:</strong> Commands that don't fit into other categories.</li>
                </ul>
            `,
            "commands-slash-moderation": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - Moderation</h2>
                <p class="text-gray-300 mb-4">
                    These commands help you maintain order and manage users within your server.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/kick</code> - Kick a user from the server.</li>
                    <li><code>/ban</code> - Ban a user from the server.</li>
                    <li><code>/unban</code> - Unban a user from the server.</li>
                    <li><code>/warn</code> - Warn a user in the server.</li>
                    <li><code>/warn-count</code> - Get the number of warnings a user in the server has.</li>
                    <li><code>/warn-clear</code> - Clear all warnings of a user in the server.</li>
                    <li><code>/purge</code> - Deletes a set number of messages.</li>
                    <li><code>/timeout</code> - Timeout a user.</li>
                </ul>
            `,
            "commands-slash-utility": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - Utility</h2>
                <p class="text-gray-300 mb-4">
                    Handy tools for various server and bot-related information.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/giveaway</code> - Host a giveaway.</li>
                    <li><code>/ping</code> - Returns the latency of the bot.</li>
                    <li><code>/server-info</code> - Get information about this server.</li>
                    <li><code>/user-info</code> - Get a user's information.</li>
                    <li><code>/guilds</code> - List out guilds I am in.</li>
                    <li><code>/help</code> - Pops-up the help menu or specific command help.</li>
                    <li><code>/invite</code> - Invite me to your server.</li>
                    <li><code>/create-invite</code> - Create an invite link for this server.</li>
                    <li><code>/define</code> - Search the meaning of a word.</li>
                    <li><code>/google</code> - Google something.</li>
                </ul>
            `,
            "commands-slash-fun": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - Fun</h2>
                <p class="text-gray-300 mb-4">
                    Commands to add a touch of fun and entertainment to your server.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/anime-quote</code> - Random anime quote.</li>
                    <li><code>/8ball</code> - Ask a question to decide something.</li>
                    <li><code>/joke</code> - Shares a joke.</li>
                    <li><code>/movie</code> - Suggests a movie.</li>
                </ul>
            `,
            "commands-slash-gifs": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - GIFs</h2>
                <p class="text-gray-300 mb-4">
                    Send various anime-themed reaction GIFs.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/cry</code> - Sends crying anime GIF.</li>
                    <li><code>/dance</code> - Sends dancing anime GIF.</li>
                    <li><code>/happy</code> - Sends a happy anime GIF.</li>
                    <li><code>/slap</code> - Sends a slapping anime GIF.</li>
                    <li><code>/wink</code> - Sends a winking anime GIF.</li>
                </ul>
            `,
            "commands-slash-image": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - Image</h2>
                <p class="text-gray-300 mb-4">
                    Commands related to images and visual content.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/avatar</code> - View avatar of a user.</li>
                    <li><code>/cat</code> - Sends a random cute cat picture!</li>
                    <li><code>/dog</code> - Sends a cute dog image.</li>
                    <li><code>/embed</code> - Create an embed.</li>
                </ul>
            `,
            "commands-slash-server-management": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - Server Management</h2>
                <p class="text-gray-300 mb-4">
                    Tools to help you manage your Discord server's channels, roles, and members.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/create-channel</code> - Create a channel.</li>
                    <li><code>/delete-channel</code> - Delete a channel with its ID.</li>
                    <li><code>/add-role</code> - Add a role to a user.</li>
                    <li><code>/remove-role</code> - Remove a role from a user.</li>
                    <li><code>/set-nickname</code> - Set a user's nickname.</li>
                    <li><code>/mute</code> - Mute a user in a voice chat.</li>
                    <li><code>/unmute</code> - Unmute a user in a voice chat.</li>
                    <li><code>/slowmode</code> - Set the slowmode in the current channel.</li>
                </ul>
            `,
            "commands-slash-support": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - Support</h2>
                <p class="text-gray-300 mb-4">
                    Commands to get assistance or report issues with the bot.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/raise-ticket</code> - Raise a ticket for an ongoing issue.</li>
                    <li><code>/report-issue</code> - Report an issue being faced while using the bot.</li>
                </ul>
            `,
            "commands-slash-text-tools": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - Text Tools</h2>
                <p class="text-gray-300 mb-4">
                    Useful commands for text manipulation and communication.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/translate</code> - Translate something!</li>
                    <li><code>/whisper</code> - Whispers a user.</li>
                    <li><code>/confess</code> - Confess something anonymously.</li>
                </ul>
            `,
            "commands-slash-security": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - Security</h2>
                <p class="text-gray-300 mb-4">
                    Commands to help with security-related checks.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/validate-cc</code> - Validate a credit or debit card number.</li>
                </ul>
            `,
            "commands-slash-tools": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - Tools</h2>
                <p class="text-gray-300 mb-4">
                    General purpose tools for various tasks.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/generate-password</code> - Create a strong password.</li>
                </ul>
            `,
            "commands-slash-other": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - Other Commands</h2>
                <p class="text-gray-300 mb-4">
                    Miscellaneous commands that provide general information or functionality.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/info</code> - Some information about me!</li>
                    <li><code>/suggest</code> - Suggest something.</li>
                </ul>
            `,
            "commands-slash-hire": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - Hire Neko</h2>
                <p class="text-gray-300 mb-4">
                    Information on how to hire the developer for custom Discord bot creation or server setup.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/hire</code> - Hire my developer for creating a discord bot or setting up discord servers.</li>
                </ul>
            `,
            "commands-slash-uncategorized": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Slash Commands - Uncategorized</h2>
                <p class="text-gray-300 mb-4">
                    Commands that do not fit into specific categories.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>/intents-status</code> - Check which intents are enabled.</li>
                </ul>
            `,
            "commands-prefix": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Prefix Commands</h2>
                <p class="text-gray-300 mb-4">
                    This section provides an overview of the main prefix command categories. For detailed command usage and examples, please navigate to the specific sub-sections in the sidebar. Remember the prefixes are <code>!</code>, <code>$</code>, <code>?</code>, and <code>></code>. The prefix <code>!<code> is used as an example. You can use any of the four available prefixes.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2">
                    <li><strong>Economy:</strong> Commands related to the bot's in-built economy system.</li>
                    <li><strong>Fun and Games:</strong> Interactive games and fun commands to engage users.</li>
                    <li><strong>Utility:</strong> General purpose tools for various tasks.</li>
                    <li><strong>Look-up:</strong> Commands to fetch information from external sources.</li>
                    <li><strong>Math & Conversion:</strong> Commands for mathematical calculations and unit conversions.</li>
                    <li><strong>Meta:</strong> Miscellaneous commands providing bot information or general facts.</li>
                </ul>
            `,
            "commands-prefix-economy": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Prefix Commands - Economy</h2>
                <p class="text-gray-300 mb-4">
                    Manage your in-game currency "Neko Coins" and interact with the bot's economy system.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>!balance</code> - Check your current balance.</li>
                    <li><code>!daily</code> - Claim your daily reward.</li>
                    <li><code>!buy</code> - Buy an item from the shop.</li>
                    <li><code>!work</code> - Work to earn money.</li>
                    <li><code>!beg</code> - Beg for money.</li>
                    <li><code>!crime</code> - Commit a crime.</li>
                    <li><code>!sell</code> - Sell items from your inventory.</li>
                    <li><code>!sellall</code> - Sell your entire inventory.</li>
                    <li><code>!use</code> - Use an item from your inventory.</li>
                    <li><code>!jobs</code> - See the list of available jobs.</li>
                    <li><code>!pay</code> - Pay some amount to another person.</li>
                    <li><code>!paytax</code> - Pay your taxes.</li>
                    <li><code>!payrent</code> - Pay your rent.</li>
                    <li><code>!inventory</code> - View items in your inventory.</li>
                    <li><code>!gift</code> - Gift items from your inventory to someone.</li>
                    <li><code>!shop</code> - Browse items available in the shop.</li>
                    <li><code>!leaderboard</code> - See the top 10 richest users on the server.</li>
                    <li><code>!lottery</code> - Try your luck with lottery tickets.</li>
                </ul>
            `,
            "commands-prefix-fun-games": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Prefix Commands - Fun and Games</h2>
                <p class="text-gray-300 mb-4">
                    Engage with interactive games and fun commands.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>!blackjack</code> - Compete against the dealer to get closest to 21.</li>
                    <li><code>!kiss</code> - Sends an anime kissing GIF.</li>
                    <li><code>!rps</code> - Rock Paper Scissors.</li>
                    <li><code>!tictactoe</code> - Play Tic Tac Toe game with anyone in the server.</li>
                    <li><code>!typerace</code> - Starts a typing race.</li>
                    <li><code>!slots</code> - Play the slot machine game.</li>
                    <li><code>!coinflip</code> - Flip a coin.</li>
                    <li><code>!roulette</code> - Play roulette.</li>
                </ul>
            `,
            "commands-prefix-utility": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Prefix Commands - Utility</h2>
                <p class="text-gray-300 mb-4">
                    General utility commands for various helpful functions.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>!remindme</code> - Sets a reminder for you.</li>
                    <li><code>!render</code> - Render a chemical compound by name or formula.</li>
                    <li><code>!shorten</code> - Shortens a URL.</li>
                    <li><code>!uptime</code> - Shows the bot's uptime.</li>
                    <li><code>!weather</code> - Check weather of a city using its postal code.</li>
                    <li><code>!quote-this</code> - Reply to a message to turn it into a quote.</li>
                </ul>
            `,
            "commands-prefix-lookup": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Prefix Commands - Look-up</h2>
                <p class="text-gray-300 mb-4">
                    Commands to fetch information from various external sources.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>!lyrics</code> - Search lyrics of a song.</li>
                    <li><code>!block-info</code> - Gives information about a Minecraft block.</li>
                    <li><code>!mcserver</code> - Checks the status of a Minecraft server.</li>
                    <li><code>!nasa</code> - Fetches NASA's Astronomy Picture of the Day.</li>
                    <li><code>!mars</code> - Gets Mars images.</li>
                    <li><code>!gita</code> - Fetches a verse from the Bhagavad Gita.</li>
                </ul>
            `,
            "commands-prefix-math-conversion": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Prefix Commands - Math & Conversion</h2>
                <p class="text-gray-300 mb-4">
                    Commands for mathematical calculations and unit conversions.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>!convert</code> - Convert currencies.</li>
                    <li><code>!factor</code> - Calculates the factors of a number.</li>
                    <li><code>!hex</code> - Converts a number to hexadecimal.</li>
                    <li><code>!rgb</code> - Converts RGB to HEX.</li>
                    <li><code>!sqrt</code> - Calculates the square root of a number.</li>
                </ul>
            `,
            "commands-prefix-meta": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Prefix Commands - Meta</h2>
                <p class="text-gray-300 mb-4">
                    Miscellaneous commands providing information about the bot or general facts.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><code>!policy</code> - Displays the bot's policy.</li>
                    <li><code>!vedicfact</code> - Gives a random Vedic fact.</li>
                    <li><code>!quote</code> - Fetches an inspirational quote.</li>
                </ul>
            `,
            "other-features": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Other Features</h2>
                <p class="text-gray-300 mb-4">
                    Beyond commands, Neko Code offers several passive and utility features to enhance your server experience.
                    Explore the sub-sections for detailed information on Detectors and the Quotes Message Link feature.
                </p>
            `,
            "other-features-detectors": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Other Features - Detectors</h2>
                <p class="text-gray-300 mb-4">
                    Neko Code includes intelligent detectors to help maintain server safety and transparency.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><strong>Token Detector:</strong> Automatically detects and warns users who accidentally post Discord bot tokens in chat, helping to prevent security breaches.</li>
                    <li><strong>Ghost Ping Detector:</strong> Identifies and notifies users when someone "ghost pings" (mentions someone and then quickly deletes the message), promoting transparency.</li>
                </ul>
            `,
            "other-features-quotes-link": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Other Features - Quotes Message Link</h2>
                <p class="text-gray-300 mb-4">
                    Enhance your conversation flow with automatic message embedding.
                </p>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li>When a Discord message link is posted, Neko Code can automatically embed the content of that message, making it easier to see quoted messages without leaving the current channel.</li>
                </ul>
            `,
            "support": `
                <h2 class="text-3xl font-semibold section-title page-heading mb-6">Support & Community</h2>
                <p class="text-gray-300 mb-4">
                    We are dedicated to providing comprehensive support for all Neko Code users. If you encounter any issues, have questions about bot functionality, or wish to suggest new features, our community and support team are here to help. We encourage you to join our official Discord support server, where you can connect with other users, get real-time assistance from our moderators, and stay updated on the latest news and announcements. Your feedback is invaluable in helping us improve Neko Code and ensure a smooth experience for everyone.
                </p>
                <h3 class="text-2xl font-medium text-white mb-3 mt-6">How to Get Support:</h3>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li><strong>Join our Discord Server:</strong> The fastest way to get help is by joining our official <a href="https://nekocode.in/discord" target="_blank" class="text-blue-400 hover:underline">Support Server</a>. Here, you can ask questions in dedicated support channels, report bugs, and interact directly with the Neko Code team and other experienced users.</li>
                    <li><strong>Check the FAQ:</strong> Before asking a question, please refer to our Frequently Asked Questions (FAQ) section (if available) on the Discord server or within the documentation. Many common issues are addressed there.</li>
                    <li><strong>Use Command Help:</strong> For specific command usage, remember you can always type <code>/help [command_name]</code> in your Discord server to get detailed information about any command.</li>
                    <li><strong>Report an Issue:</strong> If you find a bug or an unexpected behavior, please use the <code>/report-issue</code> slash command in your server or report it directly in the support server's bug report channel. Provide as much detail as possible, including steps to reproduce the issue.</li>
                    <li><strong>Suggest Features:</strong> We love hearing your ideas! Use the <code>/suggest</code> slash command or the dedicated suggestion channel in our support server to propose new features or improvements.</li>
                </ul>
                <div class="mt-4">
                    <a href="https://nekocode.in/discord" target="_blank" class="btn-primary inline-block">
                        Join Support Server
                    </a>
                </div>
            `
        };

        document.addEventListener('DOMContentLoaded', () => {
            const contentDisplay = document.getElementById('content-display');
            const sidebarNav = document.getElementById('sidebar-nav');
            const sidebarLinks = sidebarNav.querySelectorAll('.sidebar-link');
            const searchInputMain = document.getElementById('search-input-main');
            const searchOverlay = document.getElementById('search-overlay');
            const searchInputModal = document.getElementById('search-input-modal');
            const searchResultsContainer = document.getElementById('search-results');
            const scrollToTopBtn = document.getElementById('scrollToTopBtn');

            // Settings elements
            const settingsButton = document.getElementById('settings-button');
            const settingsDropdown = document.getElementById('settings-dropdown');
            const colorSwatches = document.querySelectorAll('.color-swatch');

            // Hamburger menu elements
            const hamburgerBtn = document.getElementById('hamburger-btn');
            const closeSidebarBtn = document.getElementById('close-sidebar-btn');
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebar-overlay');

            // Function to show/hide search overlay
            function showSearchOverlay() {
                searchOverlay.classList.remove('hidden');
                const mainSearchValue = searchInputMain.value;
                searchInputModal.value = mainSearchValue;
                searchInputModal.focus();
                filterSearchResultsModal(mainSearchValue);
            }

            function hideSearchOverlay() {
                searchOverlay.classList.add('hidden');
                searchInputModal.value = ''; // Clear modal search input
                searchResultsContainer.innerHTML = ''; // Clear modal results
            }

            // Function to load content into the main display area
            function loadContent(pageId) {
                if (documentationContent[pageId]) {
                    contentDisplay.innerHTML = documentationContent[pageId];

                    // Remove all active and parent-active classes first
                    sidebarLinks.forEach(link => {
                        link.classList.remove('active');
                        link.classList.remove('sidebar-parent-active');
                    });

                    // Set active class for the clicked link
                    const activeLink = document.querySelector(`[data-page-id="${pageId}"]`);
                    if (activeLink) {
                        activeLink.classList.add('active');

                        // Highlight parent if it's a sub-command category
                        const parentPageIds = {
                            'commands-slash-moderation': 'commands-slash',
                            'commands-slash-utility': 'commands-slash',
                            'commands-slash-fun': 'commands-slash',
                            'commands-slash-gifs': 'commands-slash',
                            'commands-slash-image': 'commands-slash',
                            'commands-slash-server-management': 'commands-slash',
                            'commands-slash-support': 'commands-slash',
                            'commands-slash-text-tools': 'commands-slash',
                            'commands-slash-security': 'commands-slash',
                            'commands-slash-tools': 'commands-slash',
                            'commands-slash-other': 'commands-slash',
                            'commands-slash-hire': 'commands-slash',
                            'commands-slash-uncategorized': 'commands-slash',
                            'commands-prefix-economy': 'commands-prefix',
                            'commands-prefix-fun-games': 'commands-prefix',
                            'commands-prefix-utility': 'commands-prefix',
                            'commands-prefix-lookup': 'commands-prefix',
                            'commands-prefix-math-conversion': 'commands-prefix',
                            'commands-prefix-meta': 'commands-prefix',
                            'other-features-detectors': 'other-features',
                            'other-features-quotes-link': 'other-features'
                        };

                        const parentId = parentPageIds[pageId];
                        if (parentId) {
                            const parentLink = document.querySelector(`[data-page-id="${parentId}"]`);
                            if (parentLink) {
                                parentLink.classList.add('sidebar-parent-active');
                            }
                        }
                    }
                } else {
                    contentDisplay.innerHTML = `<p class="text-red-400">Content for "${pageId}" not found.</p>`;
                }
                // Close sidebar after loading content on mobile
                if (window.innerWidth < 1024) {
                    sidebar.classList.remove('open');
                    sidebarOverlay.classList.remove('show');
                }
            }

            // Event listener for sidebar navigation clicks
            sidebarNav.addEventListener('click', (event) => {
                console.log('Sidebar click detected.');
                event.preventDefault();
                const targetLink = event.target.closest('.sidebar-link');
                console.log('Target Link:', targetLink);
                if (targetLink) {
                    const pageId = targetLink.dataset.pageId;
                    console.log('Page ID:', pageId);
                    if (documentationContent[pageId]) {
                        console.log('Content found for Page ID:', pageId);
                    } else {
                        console.log('Content NOT found for Page ID:', pageId);
                    }
                    loadContent(pageId);
                }
            });

            // Keyboard shortcut (Ctrl + K or Cmd + K)
            document.addEventListener('keydown', (event) => {
                if ((event.ctrlKey || event.metaKey) && event.key === 'k') {
                    event.preventDefault();
                    showSearchOverlay();
                } else if (event.key === 'Escape' && !searchOverlay.classList.contains('hidden')) {
                    hideSearchOverlay();
                } else if (event.key === 'Escape' && sidebar.classList.contains('open')) {
                    sidebar.classList.remove('open');
                    sidebarOverlay.classList.remove('show');
                }
            });

            // Click main search input to open modal
            searchInputMain.addEventListener('click', showSearchOverlay);

            // Click outside modal to close it
            searchOverlay.addEventListener('click', (event) => {
                if (event.target === searchOverlay) {
                    hideSearchOverlay();
                }
            });

            // Function to filter and display search results in the modal popup
            function filterSearchResultsModal(searchTerm) {
                searchResultsContainer.innerHTML = ''; // Clear previous results
                const lowerCaseSearchTerm = searchTerm.toLowerCase();

                const matchingResults = [];
                for (const pageId in documentationContent) {
                    const content = documentationContent[pageId];
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = content;
                    const titleElement = tempDiv.querySelector('h2');
                    const title = titleElement ? titleElement.textContent : pageId.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());

                    // Get a snippet of the content
                    const snippetText = tempDiv.textContent.replace(/\s+/g, ' ').trim(); // Remove extra whitespace
                    let snippet = '';
                    const snippetLength = 150; // Max length of snippet
                    const startIndex = snippetText.toLowerCase().indexOf(lowerCaseSearchTerm);

                    if (startIndex !== -1 && lowerCaseSearchTerm.length > 0) {
                        // If search term found, show snippet around it
                        const start = Math.max(0, startIndex - (snippetLength / 2));
                        const end = Math.min(snippetText.length, startIndex + lowerCaseSearchTerm.length + (snippetLength / 2));
                        snippet = snippetText.substring(start, end);
                        if (start > 0) snippet = '...' + snippet;
                        if (end < snippetText.length) snippet = snippet + '...';
                    } else {
                        // If no search term or empty, just take the beginning
                        snippet = snippetText.substring(0, snippetLength);
                        if (snippetText.length > snippetLength) snippet += '...';
                    }


                    if (title.toLowerCase().includes(lowerCaseSearchTerm) || content.toLowerCase().includes(lowerCaseSearchTerm)) {
                        matchingResults.push({ id: pageId, title: title, snippet: snippet });
                    }
                }

                if (matchingResults.length > 0) {
                    matchingResults.forEach(result => {
                        const resultDiv = document.createElement('div');
                        resultDiv.classList.add('search-result-item');
                        resultDiv.innerHTML = `<div class="title">${result.title}</div><div class="snippet">${result.snippet}</div>`;
                        resultDiv.addEventListener('click', () => {
                            loadContent(result.id);
                            hideSearchOverlay(); // Close popup after selection
                        });
                        searchResultsContainer.appendChild(resultDiv);
                    });
                } else {
                    const noResultsDiv = document.createElement('div');
                    noResultsDiv.classList.add('p-2', 'text-gray-400');
                    noResultsDiv.textContent = 'No results found.';
                    searchResultsContainer.appendChild(noResultsDiv);
                }
            }

            // Event listener for typing in modal search input
            searchInputModal.addEventListener('input', (event) => {
                filterSearchResultsModal(event.target.value);
            });

            // Scroll to top button logic
            window.onscroll = function() {
                if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
                    scrollToTopBtn.style.display = "block";
                } else {
                    scrollToTopBtn.style.display = "none";
                }
            };

            scrollToTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            // Settings Dropdown and Theme Logic
            settingsButton.addEventListener('click', (event) => {
                event.stopPropagation(); // Prevent click from closing dropdown immediately
                settingsDropdown.classList.toggle('show');
            });

            // Close the dropdown if the user clicks outside of it
            window.addEventListener('click', (event) => {
                if (!event.target.matches('#settings-button') && !event.target.closest('.settings-dropdown-content')) {
                    if (settingsDropdown.classList.contains('show')) {
                        settingsDropdown.classList.remove('show');
                    }
                }
            });

            // Function to set theme color
            function setThemeColor(color) {
                let primaryColor, hoverColor, borderColor, activeSidebarColor;
                switch (color) {
                    case 'purple':
                        primaryColor = '#8B5CF6';
                        hoverColor = '#7C3AED';
                        borderColor = '#7F00FF';
                        activeSidebarColor = '#7F00FF';
                        break;
                    case 'green':
                        primaryColor = '#10B981';
                        hoverColor = '#059669';
                        borderColor = '#047857';
                        activeSidebarColor = '#047857';
                        break;
                    case 'blue':
                        primaryColor = '#3B82F6';
                        hoverColor = '#2563EB';
                        borderColor = '#1D4ED8';
                        activeSidebarColor = '#1D4ED8';
                        break;
                    case 'pink':
                        primaryColor = '#EC4899';
                        hoverColor = '#DB2777';
                        borderColor = '#BE185D';
                        activeSidebarColor = '#BE185D';
                        break;
                    default:
                        primaryColor = '#8B5CF6';
                        hoverColor = '#7C3AED';
                        borderColor = '#7F00FF';
                        activeSidebarColor = '#7F00FF';
                }
                document.documentElement.style.setProperty('--theme-primary', primaryColor);
                document.documentElement.style.setProperty('--theme-hover', hoverColor);
                document.documentElement.style.setProperty('--theme-border', borderColor);
                document.documentElement.style.setProperty('--theme-active-sidebar', activeSidebarColor);

                // Update active class for swatches
                colorSwatches.forEach(swatch => {
                    swatch.classList.remove('active');
                });
                document.querySelector(`.color-swatch[data-color="${color}"]`).classList.add('active');

                localStorage.setItem('themeColor', color); // Persist preference
            }

            // Event listeners for color swatches
            colorSwatches.forEach(swatch => {
                swatch.addEventListener('click', () => {
                    const color = swatch.dataset.color;
                    setThemeColor(color);
                });
            });

            // Mobile sidebar toggle logic
            hamburgerBtn.addEventListener('click', () => {
                sidebar.classList.add('open');
                sidebar.classList.remove('hidden'); // Ensure it's not hidden by the initial setup
                sidebarOverlay.classList.add('show');
            });

            closeSidebarBtn.addEventListener('click', () => {
                sidebar.classList.remove('open');
                sidebarOverlay.classList.remove('show');
                // Re-add hidden class after transition for mobile if not desktop
                if (window.innerWidth < 1024) {
                    setTimeout(() => {
                        sidebar.classList.add('hidden');
                    }, 300); // Match CSS transition duration
                }
            });

            sidebarOverlay.addEventListener('click', () => {
                sidebar.classList.remove('open');
                sidebarOverlay.classList.remove('show');
                // Re-add hidden class after transition for mobile if not desktop
                if (window.innerWidth < 1024) {
                    setTimeout(() => {
                        sidebar.classList.add('hidden');
                    }, 300); // Match CSS transition duration
                }
            });

            // Handle resize to ensure correct sidebar visibility on desktop
            window.addEventListener('resize', () => {
                if (window.innerWidth >= 1024) { // Desktop view
                    sidebar.classList.remove('hidden');
                    sidebar.classList.remove('open'); // Ensure it's not in mobile open state
                    sidebarOverlay.classList.remove('show'); // Hide overlay
                } else { // Mobile view
                    // If the sidebar is not explicitly open, keep it hidden
                    if (!sidebar.classList.contains('open')) {
                        sidebar.classList.add('hidden');
                    }
                }
            });

            // Initial setup for sidebar visibility based on screen size
            // This ensures the correct state on page load without flickering
            if (window.innerWidth >= 1024) {
                sidebar.classList.remove('hidden'); // Ensure sidebar is visible on desktop initially
            } else {
                sidebar.classList.add('hidden'); // Hide sidebar on mobile initially
            }


            // Load saved preferences on startup
            const savedThemeColor = localStorage.getItem('themeColor');
            if (savedThemeColor) {
                setThemeColor(savedThemeColor);
            }

            // Load the default page on initial load (e.g., "about" page)
            loadContent('about');
        });
    </script>
</body>
</html>
    
